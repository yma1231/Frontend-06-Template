<style>
    .light {
        background-color: #aaa;
        margin: 20px;
        height: 120px;
        width: 120px;
        border-radius: 60px;
    }

    .traffic-light {
        padding: 20px;
        width: 160px;
        height: 450px;
        background-color: #333;
        border-radius: 20px;
    }

    .light.green {
        background-color: green;
    }

    .light.yellow {
        background-color: yellow;
    }

    .light.red {
        background-color: red;
    }
</style>

<div class="traffic-light">
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
</div>

<script>
    function green() {
        document.getElementsByClassName("light")[2].classList.remove('red');
        document.getElementsByClassName("light")[1].classList.remove('yellow');
        document.getElementsByClassName("light")[0].classList.add('green')
    }
    function yellow() {
        document.getElementsByClassName("light")[2].classList.remove('red');
        document.getElementsByClassName("light")[0].classList.remove('green');
        document.getElementsByClassName("light")[1].classList.add('yellow')
    }
    function red() {
        document.getElementsByClassName("light")[0].classList.remove('green');
        document.getElementsByClassName("light")[1].classList.remove('yellow');
        document.getElementsByClassName("light")[2].classList.add('red')
    }
    
    function sleep(t) {
        return new Promise((resolve, reject)=> {
            setTimeout(resolve, t);
        })
    }

    function go() {
        green()
        sleep(1000)
        .then(() => {
            yellow();
            return sleep(200);
        })
        .then(() => {
            red();
            return sleep(500);
        })
        .then(go)
    }
</script>